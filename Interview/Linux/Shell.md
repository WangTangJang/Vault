Shell是计算机操作系统中的一个用户界面，它是用户与操作系统内核之间的交互界面。它提供了一个命令解释器，允许用户通过键入文本命令与操作系统进行通信。Shell接受用户的命令，并将其翻译成内核能理解的指令，然后执行相应的操作。
## 分类：
1. **Bourne Shell（sh）**：
   - 原始的Unix Shell，作为其他Shell的基础。
   - 简单而高效，但缺乏一些现代Shell的特性。
   - 由于其简洁性，仍然被用作脚本解释器。
2. **Bash（Bourne Again Shell）**：
   - Bash是Bourne Shell的扩展版本，为大多数Linux系统的默认Shell。
   - 兼容Bourne Shell，并添加了许多新特性，如命令历史、命令补全等。
   - 支持脚本编程和交互式使用。
3. **C Shell（csh）**：
   - 具有与C语言类似的语法。
   - 提供了一些方便的交互式特性，如命令历史和命令补全。
   - 在一些Unix系统中作为默认Shell，例如FreeBSD。
4. **Korn Shell（ksh）**：
   - 结合了Bourne Shell和C Shell的特性，具有强大的脚本编程功能。
   - 兼容Bourne Shell，但添加了很多新的特性，如数组和算术运算。
   - 在一些商业Unix系统中作为默认Shell，例如AIX。
5. **Zsh（Z Shell）**：
   - Zsh是Bash的扩展，提供了更多的交互式特性和脚本编程功能。
   - 包含强大的自动补全功能、模糊搜索等。
   - 在一些用户中作为更现代、用户友好的替代品。
6. **Fish Shell**：
   - 设计为用户友好、易用的Shell。
   - 提供智能的命令补全和语法高亮等特性。
   - 尽力减少用户输入错误，使Shell更容易学习和使用。
7. **PowerShell**：
   - 由Microsoft开发，主要用于Windows环境。
   - 具有强大的对象导向的脚本语言，支持.NET框架。
   - 提供了广泛的系统管理和自动化功能。
## 脚本编程：
Shell本身也支持脚本编程，用户可以将一系列Shell命令保存到文件中，形成脚本，然后通过执行这个脚本来完成一系列任务。
### 语法
#### Shebang行：
在脚本文件的第一行添加Shebang行，指定脚本的解释器。例如，对于Bash脚本，可以使用 `#!/bin/bash`。
#### 注释：
- 使用注释来解释脚本中的重要步骤和逻辑。
- 注释应该清晰、简洁，并放在相关代码行上方。
```shell
# 这是一个示例脚本，用于执行某项任务
```
- 对于多行注释，可以使用`:`和`:`之间的所有内容被注释掉。
#### 变量
- 定义变量时使用等号 `=` 赋值，不要有空格。
- 引用变量时使用`${}`形式，并且变量名应该被双引号 `"` 包围，使用单引号(`'`)不会解析变量
- 推荐在变量名前加上美元符号 `$`。
- 反引号（\` \`）用于执行命令，并将命令的输出结果赋值给变量。这被称为命令替换。例如：
```shell
current_date=`date`
current_date=`date` echo "Today is $current_date"
```
- 使用`unset`命令删除一个变量。
#### 接收用户输入
在Shell脚本中，可以使用`read`命令来接收用户的输入。
```shell
#!/bin/bash

# 提示用户输入
echo "请输入您的名字："

# 使用read命令接收用户输入，并存储到变量中
read username

# 打印用户输入的内容
echo "您输入的名字是：$username"
```
需要注意的是，`read`命令默认会将用户输入的整行文本都存储到变量中，如果需要限制只接收一个单词或指定的字符数，可以使用`-n`选项和`-r`选项。例如，`read -n 1 variable`表示只接收一个字符。
```shell
#!/bin/bash
echo "请输入一个字符："
read -n 1 mychar

echo -e "\n您输入的字符是：$mychar"
```
#### 条件判断语句
在Shell脚本中，条件判断语句主要使用`if`、`elif`（可选）、`else`和`fi`关键字。以下是一个基本的条件判断结构：
```bash
#!/bin/bash

# 定义一个变量
score=75

# 使用if语句进行条件判断
if [ $score -ge 60 ]; then
    echo "成绩及格"
else
    echo "成绩不及格"
fi
```
以下是一些常见的条件判断操作：
- **数值比较**：
	- `-eq`：等于
	- `-ne`：不等于
	- `-lt`：小于
	- `-le`：小于等于
	- `-gt`：大于
	- `-ge`：大于等于
- **字符串比较**：
	- `=`：等于
	- `!=`：不等于
- **文件判断**：
	- `-d dir`：判断目录是否存在
	- `-e path`：判断文件是否存在
	- `-r file`：检查文件是否可读。
	- `-w file`：检查文件是否可写。
	- `-x file`：检查文件是否可执行。
	- `-ef file`：判断两个文件是否相同
	- `-s file`：检查文件是否为空（大小不为零）。
	- `-nt file`：检查文件是否比另一个文件新。
	- `-ot file`：检查文件是否比另一个文件旧。
#### expr关键字
`expr`是一个用于进行表达式计算的关键字。它可以用于执行数学运算和字符串操作。下面是一些`expr`关键字的常见用法：
##### 数学运算：
```bash
#!/bin/bash

# 使用expr进行数学运算
result=$(expr 5 + 3)
echo "5 + 3 的结果是：$result"

# 使用expr计算变量的值
a=10
b=5
result=$(expr $a - $b)
echo "$a - $b 的结果是：$result"
```
##### 字符串操作：
```bash
#!/bin/bash

# 使用expr进行字符串匹配
string="Hello, World!"
pattern="World"
result=$(expr "$string" : ".*$pattern")
echo "字符串中是否包含'World'：$result"
```
由于`expr`的语法相对较古老，因此在现代Shell脚本中，更常见的是使用`$((...))`或`((...))`进行数学运算，以及使用其他字符串操作方法，例如`[[ ... ]]`来进行字符串匹配。
以下是使用`$((...))`进行数学运算的例子：
```bash
#!/bin/bash

# 使用$((...))进行数学运算
result=$((5 + 3))
echo "5 + 3 的结果是：$result"
```
#### 参数传递
- `$0`：脚本本身的名称。
- `$1`、`$2`、...：传递给脚本的参数。
例如，一个简单的脚本可以这样接收参数：
   ```bash
   #!/bin/bash

   echo "脚本名称：$0"
   echo "第一个参数：$1"
   echo "第二个参数：$2"
   ```
执行脚本时，可以这样传递参数：
   ```bash
   ./myscript.sh arg1 arg2
   ```
#### 让脚本变成指令
- 可以将脚本所在的目录添加到`$PATH`环境变量中，或者将脚本复制到一个已经在`$PATH`中的目录。
- 或者创建一个别名，将脚本的路径和名称映射为一个简短的别名。
例如，在`~/.bashrc`文件中添加别名：
   ```bash
   alias myscript='/path/to/myscript.sh'
   ```
使得在终端中直接运行 `myscript` 就相当于运行 `/path/to/myscript.sh`。
### 执行流程
#### 创建脚本文件
- 使用文本编辑器（如`vi`、`nano`、`gedit`等）创建一个新文件，文件扩展名通常为`.sh`。例如：
 ```bash
 $ nano myscript.sh
 ```
#### 编辑脚本
- 在编辑器中输入Shell脚本命令。例如，一个简单的脚本：
 ```bash
 #!/bin/bash
 echo "Hello, World!"
 ```
#### 添加执行权限：
- 在终端中使用`chmod`命令为脚本文件添加执行权限：
 ```bash
 $ chmod +x myscript.sh
 ```
#### 运行脚本：
- 在终端中运行脚本：
 ```bash
 $ ./myscript.sh
 ```

