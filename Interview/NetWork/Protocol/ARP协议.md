地址解析协议（ARP）是一种用于将[[IP 地址|IP地址]]**映射**到物理MAC地址的协议。在计算机网络中，通信的两个设备之间通常使用IP地址进行识别和寻址，但在本地网络内，数据包的传输需要知道目标设备的MAC地址。

IP地址可以比作为地址，MAC地址为收件人，在一次通信过程中，两者是缺一不可的。

ARP的**主要作用是通过查询目标IP地址，获取与之对应的MAC地址**。它允许设备在同一物理网络上解析目标IP地址，以便在数据链路层上进行直接通信。

以下是ARP的基本原理和工作步骤：

1. **请求（Request）：**
   - 当设备A想要与设备B通信，但设备A只知道设备B的IP地址而不知道其MAC地址时，设备A会在本地网络内广播一个ARP请求。
   - ARP请求包含设备A的IP地址、MAC地址（通常是广播地址，表示未知），以及设备A希望解析的目标IP地址。

2. **响应（Reply）：**
   - 所有接收到ARP请求的设备都会检查目标IP地址是否与自己的IP地址匹配。
   - 目标设备B收到ARP请求后，会向设备A发送一个ARP响应，包含自己的IP地址和真实的MAC地址。
   - 其他设备收到ARP请求后，如果发现目标IP地址与自己不匹配，则忽略请求。

3. **缓存（Caching）：**
   - 设备A收到目标设备B的ARP响应后，会将B的IP地址和MAC地址的映射关系存储在本地的ARP缓存中。
   - 这样，设备A就不再需要发送ARP请求，而是直接使用已知的MAC地址进行通信。
   - ARP缓存有一定的生存时间，过期后需要重新进行ARP请求以获取最新的MAC地址。

4. **广播域（Broadcast Domain）：**
   - ARP请求是在广播域内广播的，即在同一物理网络中的所有设备都会收到这个请求。
   - 这确保了ARP请求能够被目标设备收到，而不涉及路由器或跨越不同物理网络的通信。

ARP协议通常用于IPv4网络，而在IPv6网络中，类似的功能由邻居发现协议（Neighbor Discovery Protocol，NDP）来完成。ARP是一个简单而有效的协议，但由于它的广播性质和缺乏安全机制，可能容易受到欺骗攻击，如ARP欺骗（ARP Spoofing）或ARP中毒（ARP Poisoning）。